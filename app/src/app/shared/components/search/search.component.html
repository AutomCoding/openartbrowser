<ng-template #rt let-r="result" let-t="term">
  <ng-template [ngIf]="r['type'] == 'artwork'">
    <span class="type-container">
      <img [src]="r?.imageSmall" class="mr-1" style="height: 45px" />
    </span>
  </ng-template>
  <ng-template [ngIf]="r['type'] == 'artist'">
    <span class="type-container">
      <i class="fas fa-user"></i>
    </span>
  </ng-template>
  <ng-template [ngIf]="r['type'] == 'movement'">
    <span class="type-container">
      <i class="fas fa-wind"></i>
    </span>
  </ng-template>
  <ng-template [ngIf]="r['type'] == 'material'">
    <span class="type-container">
      <i class="fas fa-scroll"></i>
    </span>
  </ng-template>
  <ng-template [ngIf]="r['type'] == 'genre'">
    <span class="type-container">
      <i class="fas fa-tag"></i>
    </span>
  </ng-template>
  <ng-template [ngIf]="r['type'] == 'location'">
    <span class="type-container">
      <i class="fas fa-archway"></i>
    </span>
  </ng-template>
  <ng-template [ngIf]="r['type'] == 'object'">
    <span class="type-container">
      <i class="fas fa-image"></i>
    </span>
  </ng-template>
  <span id="search-badge" class="badge badge-secondary"><span *ngIf="r['type'] != 'object'; else elseBlock"> {{ r?.type
      }}</span>
    <ng-template #elseBlock> motif </ng-template>
  </span>
  <ngb-highlight [result]="r.label" [term]="t" style="padding: 8px;"></ngb-highlight>
</ng-template>
<div class="chips chips-placeholder d-flex align-items-center">
  <ng-template ngFor let-i [ngForOf]="searchItems">
    <span class="badge badge-pill badge-secondary chip search-chip">
      <span *ngIf="i.type === 'artist'" class="fas fa-user"></span>
      <span *ngIf="i.type === 'movement'" class="fas fa-wind"></span>
      <span *ngIf="i.type === 'material'" class="fas fa-scroll"></span>
      <span *ngIf="i.type === 'genre'" class="fas fa-tag"></span>
      <span *ngIf="i.type === 'location'" class="fas fa-archway"></span>
      <span *ngIf="i.type === 'object'" class="fas fa-image"></span>
      {{i.type? truncate(i.label) : formatNoTypeChip(truncate(i.label))}}
      <span (click)="removeTag(i)" class="fas fa-times-circle search-chip-x"></span></span>
  </ng-template>

  <input id="search-header" class="form-control flex-grow-1" [focusFirst]="false" type="text" name="Artwork" #input
    placeholder="Search for an Artwork ..." [ngbTypeahead]="search" [resultTemplate]="rt" [inputFormatter]="formatter"
    (selectItem)="itemSelected($event)" (keyup.enter)="navigateToSearchText(input.value)" (keyup.esc)="clearAllTags()"
    (keyup.backspace)="readyToRemove()" (keydown.backspace)="removeNewestTag()" [(ngModel)]="searchInput" />
</div>
<button id="search-button" class="btn btn-link" (click)="searchText()"><i class="fas fa-search"></i></button>